<script>
  if (navigator.geolocation) {
    var timeoutVal = 10 * 1000 * 1000;
    navigator.geolocation.watchPosition(
      displayPosition,
      displayError, {
        enableHighAccuracy: true,
        timeout: timeoutVal,
        maximumAge: 0
      });
  }
  else {
    alert("Geolocation не поддерживается данным браузером");
  }

  function displayPosition(position) {
    var win = document.parent;

    win.postMessage(
      position,
      "*" // target domain
    );

  }

  function displayError(error) {
    var errors = {
      1: 'Нет прав доступа',
      2: 'Местоположение невозможно определить',
      3: 'Таймаут соединения'
    };
  }
</script>